(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8238],{2463:(e,t,a)=>{Promise.resolve().then(a.bind(a,3804))},3804:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var s=a(5155),r=a(2115),l=a(3312),n=a(5565),i=a(9749),c=a(7485),d=a(368),o=a(7656),u=a(3900);function m(e){let{courses:t,onAddCourse:a,onEditCourse:m,onDeleteCourse:h,onAddTrendingCourse:x}=e,[p,f]=(0,r.useState)(1),[g,j]=(0,r.useState)(""),y=t.filter(e=>e.title.toLowerCase().includes(g.toLowerCase())),v=Math.ceil(y.length/8),b=(p-1)*8,N=y.slice(b,b+8);return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-bold",children:"Course Management"}),(0,s.jsx)(l.$,{onClick:a,children:"Add Course"})]}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(u.p,{type:"text",placeholder:"Search by title...",value:g,onChange:e=>{j(e.target.value),f(1)},className:"w-full sm:w-[300px]"})}),(0,s.jsx)("div",{className:"flex flex-wrap gap-4 justify-center mb-4",children:N.map(e=>(0,s.jsxs)(i.Zp,{className:"w-full sm:w-[260px]",children:[(0,s.jsx)(i.aR,{children:(0,s.jsx)(n.default,{src:"https://api.biddarthi.org/".concat(e.thumbnail),alt:e.title,width:0,height:0,sizes:"100vw",className:"w-full h-auto object-cover rounded-t-lg"})}),(0,s.jsxs)(i.Wu,{children:[(0,s.jsx)(i.ZB,{children:e.title}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Category: ",e.category.categoryName]}),(0,s.jsxs)("p",{className:"text-sm text-gray-800",children:["Price: $",e.price]})]}),(0,s.jsx)(i.wL,{className:"flex justify-between",children:(0,s.jsxs)(c.rI,{children:[(0,s.jsx)(c.ty,{asChild:!0,children:(0,s.jsx)(l.$,{variant:"ghost",className:"h-8 w-8 p-0",children:(0,s.jsx)(d.A,{className:"w-4 h-4"})})}),(0,s.jsxs)(c.SQ,{children:[(0,s.jsx)(c._2,{onClick:()=>m(e),children:"Edit"}),(0,s.jsx)(c._2,{onClick:()=>h(e._id),children:"Delete"}),(0,s.jsx)(c._2,{onClick:()=>x(e._id),children:"Add to Trending"})]})]})})]},e._id))}),(0,s.jsx)(o.dK,{children:(0,s.jsxs)(o.Iu,{children:[(0,s.jsx)(o.cU,{children:(0,s.jsx)(o.Eb,{onClick:()=>p>1&&f(p-1),className:1===p?"cursor-not-allowed opacity-50":""})}),Array.from({length:v},(e,t)=>(0,s.jsx)(o.cU,{children:(0,s.jsx)(o.n$,{href:"#",isActive:p===t+1,onClick:()=>f(t+1),children:t+1})},t)),v>5&&(0,s.jsx)(o.M_,{}),(0,s.jsx)(o.cU,{children:(0,s.jsx)(o.WA,{onClick:()=>p<v&&f(p+1),className:p===v?"cursor-not-allowed opacity-50":""})})]})})]})}var h=a(2897),x=a(5012),p=a(5325),f=a(2222),g=a(1567);function j(e){let{className:t,classNames:a,showOutsideDays:r=!0,...n}=e;return(0,s.jsx)(f.hv,{showOutsideDays:r,className:(0,g.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,g.cn)((0,l.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:(0,g.cn)("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md","range"===n.mode?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:(0,g.cn)((0,l.r)({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{className:t,...a}=e;return(0,s.jsx)(x.A,{className:(0,g.cn)("h-4 w-4",t),...a})},IconRight:e=>{let{className:t,...a}=e;return(0,s.jsx)(p.A,{className:(0,g.cn)("h-4 w-4",t),...a})}},...n})}j.displayName="Calendar";var y=a(9095),v=a(32),b=a(1585);function N(e){var t;let{initialCourse:a,onCancel:n,onSave:i,categories:c}=e,[d,o]=(0,r.useState)(a||{}),[m,x]=(0,r.useState)(null),[p,f]=(0,r.useState)((null===(t=d.category)||void 0===t?void 0:t._id)||""),[g,N]=(0,r.useState)(d.discountEndsAt?new Date(d.discountEndsAt):void 0);return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-bold",children:a?"Edit Course":"Add Course"}),(0,s.jsx)(l.$,{onClick:n,children:"Show Courses"})]}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i({...d,thumbnail:m||d.thumbnail,category:{_id:p},discountEndsAt:g},e)},children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Course Title"}),(0,s.jsx)(u.p,{placeholder:"Course Title",value:d.title||"",onChange:e=>o({...d,title:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Thumbnail (File Upload)"}),(0,s.jsx)(u.p,{type:"file",onChange:e=>{var t;return x((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Category"}),(0,s.jsx)(b.A,{value:p,onChange:e=>f(e)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Price"}),(0,s.jsx)(u.p,{type:"number",placeholder:"Course Price",value:d.price||"",onChange:e=>o({...d,price:parseFloat(e.target.value)}),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Discount Price"}),(0,s.jsx)(u.p,{type:"number",placeholder:"Discount Price",value:d.discountPrice||"",onChange:e=>o({...d,discountPrice:parseFloat(e.target.value)})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Description"}),(0,s.jsx)(u.p,{placeholder:"Course Description",value:d.description||"",onChange:e=>o({...d,description:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Instructor"}),(0,s.jsx)(u.p,{placeholder:"Instructor Name",value:d.instructor||"",onChange:e=>o({...d,instructor:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Discount Ends At"}),(0,s.jsxs)(y.AM,{children:[(0,s.jsx)(y.Wv,{asChild:!0,children:(0,s.jsxs)(l.$,{variant:"outline",className:"w-full",children:[g?(0,v.GP)(g,"PPP"):"Pick a date",(0,s.jsx)(h.A,{className:"ml-auto h-4 w-4 opacity-50"})]})}),(0,s.jsx)(y.hl,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(j,{mode:"single",selected:g,onSelect:N})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Demo Video Link"}),(0,s.jsx)(u.p,{placeholder:"Demo Video URL",value:d.demoVideo||"",onChange:e=>o({...d,demoVideo:e.target.value})})]})]}),(0,s.jsx)("div",{className:"flex justify-end mt-4",children:(0,s.jsx)(l.$,{type:"submit",children:"Save Course"})})]})]})}function w(){let[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null),[o,u]=(0,r.useState)(!1),[h,x]=(0,r.useState)(null),p=()=>document.cookie.replace(/(?:(?:^|.*;\s*)token\s*=\s*([^;]*).*$)|^.*$/,"$1"),f=async()=>{u(!0);try{let e=await fetch("/api/categories");if(!e.ok)throw Error("Failed to fetch categories");let t=await e.json();l(t)}catch(e){x(e.message)}finally{u(!1)}},g=async()=>{u(!0);try{let e=await fetch("/api/courses");if(!e.ok)throw Error("Failed to fetch courses");let a=await e.json();t(a)}catch(e){x(e.message)}finally{u(!1)}};(0,r.useEffect)(()=>{f()},[]),(0,r.useEffect)(()=>{a.length>0&&g()},[a]);let j=async e=>{u(!0);try{await fetch("/api/courses/".concat(e),{method:"DELETE"}),g()}catch(e){console.error("Delete failed:",e)}finally{u(!1)}},y=async e=>{u(!0),x(null);let t=p();try{let a=await fetch("/api/trending",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({courseId:e})});if(!a.ok){let e=await a.json();throw Error(e.message||"Failed to add course to trending")}g()}catch(e){console.error("Adding to trending failed:",e),x(e.message)}finally{u(!1)}},v=async(e,t)=>{var a;t.preventDefault(),x(null);let s=p(),r=e._id?"PUT":"POST",l=e._id?"/api/courses/".concat(e._id):"/api/courses";u(!0);let n=new FormData;n.append("title",e.title),n.append("price",e.price.toString()),n.append("discountPrice",(null===(a=e.discountPrice)||void 0===a?void 0:a.toString())||""),n.append("description",e.description),n.append("instructor",e.instructor),n.append("discountEndsAt",e.discountEndsAt?new Date(e.discountEndsAt).toISOString():""),n.append("demoVideo",e.demoVideo||""),n.append("category",e.category._id),e.thumbnail&&"object"==typeof e.thumbnail&&e.thumbnail instanceof File&&n.append("thumbnail",e.thumbnail);try{let e=await fetch(l,{method:r,headers:{Authorization:"Bearer ".concat(s)},body:n});if(!e.ok){let t=await e.json();throw Error(t.message||"Error: ".concat(e.status))}i(!0),g()}catch(e){console.error("Save failed:",e),x(e.message)}finally{u(!1)}};return(0,s.jsxs)("div",{className:"p-6 m-6 border rounded-lg shadow",children:[o&&(0,s.jsx)("p",{className:"text-center",children:"Loading..."}),h&&(0,s.jsx)("p",{className:"text-red-500 text-center",children:h}),n?(0,s.jsx)(m,{courses:e,onAddCourse:()=>{d(null),i(!1)},onEditCourse:e=>{d(e),i(!1)},onDeleteCourse:j,onAddTrendingCourse:y}):(0,s.jsx)(N,{initialCourse:c,onCancel:()=>i(!0),onSave:v,categories:a})]})}},9749:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>n,aR:()=>i,wL:()=>u});var s=a(5155),r=a(2115),l=a(1567);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...r})});n.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...r})});i.displayName="CardHeader";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("font-semibold leading-none tracking-tight",a),...r})});c.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...r})});o.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...r})});u.displayName="CardFooter"},7656:(e,t,a)=>{"use strict";a.d(t,{Eb:()=>x,Iu:()=>u,M_:()=>f,WA:()=>p,cU:()=>m,dK:()=>o,n$:()=>h});var s=a(5155),r=a(2115),l=a(5012),n=a(5325),i=a(368),c=a(1567),d=a(3312);let o=e=>{let{className:t,...a}=e;return(0,s.jsx)("nav",{role:"navigation","aria-label":"pagination",className:(0,c.cn)("mx-auto flex w-full justify-center",t),...a})};o.displayName="Pagination";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("ul",{ref:t,className:(0,c.cn)("flex flex-row items-center gap-1",a),...r})});u.displayName="PaginationContent";let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("li",{ref:t,className:(0,c.cn)("",a),...r})});m.displayName="PaginationItem";let h=e=>{let{className:t,isActive:a,size:r="icon",...l}=e;return(0,s.jsx)("a",{"aria-current":a?"page":void 0,className:(0,c.cn)((0,d.r)({variant:a?"outline":"ghost",size:r}),t),...l})};h.displayName="PaginationLink";let x=e=>{let{className:t,...a}=e;return(0,s.jsxs)(h,{"aria-label":"Go to previous page",size:"default",className:(0,c.cn)("gap-1 pl-2.5",t),...a,children:[(0,s.jsx)(l.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Previous"})]})};x.displayName="PaginationPrevious";let p=e=>{let{className:t,...a}=e;return(0,s.jsxs)(h,{"aria-label":"Go to next page",size:"default",className:(0,c.cn)("gap-1 pr-2.5",t),...a,children:[(0,s.jsx)("span",{children:"Next"}),(0,s.jsx)(n.A,{className:"h-4 w-4"})]})};p.displayName="PaginationNext";let f=e=>{let{className:t,...a}=e;return(0,s.jsxs)("span",{"aria-hidden":!0,className:(0,c.cn)("flex h-9 w-9 items-center justify-center",t),...a,children:[(0,s.jsx)(i.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"More pages"})]})};f.displayName="PaginationEllipsis"}},e=>{var t=t=>e(e.s=t);e.O(0,[5565,1365,5825,2985,1263,7608,8441,1517,7358],()=>t(2463)),_N_E=e.O()}]);