(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8712],{2978:(e,t,s)=>{Promise.resolve().then(s.bind(s,4836))},6046:(e,t,s)=>{"use strict";var r=s(6658);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},4836:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(5155),a=s(2115),n=s(6046),l=s(9124);let i=e=>{let{onClose:t,children:s}=e;return(0,r.jsxs)("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black opacity-50",onClick:t}),(0,r.jsxs)(l.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-[#13284D] p-6 rounded-lg shadow-lg z-10 max-w-md w-full",children:[s,(0,r.jsx)("div",{className:"mt-6 flex justify-end",children:(0,r.jsx)("button",{onClick:t,className:"px-4 py-2 bg-[#f4bc45] text-[#13284D] rounded-lg hover:bg-opacity-90",children:"Close"})})]})]})};var o=s(2783);let c=e=>{let{params:t}=e,s=(0,n.useRouter)(),[l,c]=(0,a.useState)({name:"",phone:"",email:"",transactionId:""}),[d,u]=(0,a.useState)(!1),[m,h]=(0,a.useState)({price:0,discountPrice:0,discountEndsAt:""}),[x,b]=(0,a.useState)(!0),[f,p]=(0,a.useState)(!1),[g,y]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{let{id:e}=await t;y(e)})()},[t]),(0,a.useEffect)(()=>{g&&(async()=>{try{b(!0);let e=await fetch("/api/courses/".concat(g)),t=await e.json();if(!e.ok)throw Error(t.message||"Failed to fetch course details");h({price:t.price,discountPrice:t.discountPrice,discountEndsAt:t.discountEndsAt})}catch(e){console.error("Error fetching course data:",e)}finally{b(!1)}})()},[g]);let j=e=>{c({...l,[e.target.name]:e.target.value})},w=async e=>{if(e.preventDefault(),g)try{p(!0);let e=await fetch("/api/enrollments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({courseId:g,...l})}),t=await e.json();if(!e.ok)throw Error(t.message||"Failed to enroll");u(!0)}catch(e){console.error("Enrollment failed:",e)}finally{p(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-[#0A192F]",children:[(0,r.jsxs)("div",{className:"bg-[#13284D] p-6 rounded-lg shadow-md max-w-md w-full",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-4 text-white",children:"Enroll in Course"}),x?(0,r.jsx)("div",{className:"flex justify-center items-center",children:(0,r.jsx)(o.A,{className:"animate-spin text-gray-300",size:24})}):(0,r.jsxs)("p",{className:"text-gray-300 mb-4",children:["Please send ",(0,r.jsxs)("strong",{children:["à§³",new Date(m.discountEndsAt)>new Date&&m.discountPrice?m.discountPrice:m.price]})," to the bKash number ",(0,r.jsx)("strong",{children:"01846838507"})," and fill out the form below with your payment details."]}),(0,r.jsxs)("form",{onSubmit:w,children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-gray-300 mb-2",children:"Full Name"}),(0,r.jsx)("input",{type:"text",name:"name",value:l.name,onChange:j,required:!0,className:"w-full px-3 py-2 border rounded-lg bg-[#0A192F] text-white border-gray-600"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-gray-300 mb-2",children:"Phone Number"}),(0,r.jsx)("input",{type:"tel",name:"phone",value:l.phone,onChange:j,required:!0,className:"w-full px-3 py-2 border rounded-lg bg-[#0A192F] text-white border-gray-600"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-gray-300 mb-2",children:"Email"}),(0,r.jsx)("input",{type:"email",name:"email",value:l.email,onChange:j,required:!0,className:"w-full px-3 py-2 border rounded-lg bg-[#0A192F] text-white border-gray-600"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-gray-300 mb-2",children:"Transaction ID"}),(0,r.jsx)("input",{type:"text",name:"transactionId",value:l.transactionId,onChange:j,required:!0,className:"w-full px-3 py-2 border rounded-lg bg-[#0A192F] text-white border-gray-600"})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,r.jsx)("button",{type:"button",onClick:()=>s.back(),className:"px-4 py-2 text-gray-300 hover:text-white",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"px-4 py-2 bg-[#f4bc45] text-[#13284D] rounded-lg hover:bg-opacity-90 flex items-center justify-center",disabled:f,children:f?(0,r.jsx)(o.A,{className:"animate-spin mr-2",size:18}):"Submit"})]})]})]}),d&&(0,r.jsxs)(i,{onClose:()=>{u(!1),s.push("/courses/".concat(g))},children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-white",children:"Enrollment Successful!"}),(0,r.jsx)("p",{className:"text-gray-300 mb-4",children:"Thank you for enrolling. Please join our telegram group using the link below for further instructions. You will get a confirmation mail soon."}),(0,r.jsx)("a",{href:"https://t.me/+P7eho8F8mSM1NzU1",target:"_blank",rel:"noopener noreferrer",className:"text-[#f4bc45] hover:underline",children:"Join the Group"})]})]})}},4057:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(2115);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,r.forwardRef)((e,t)=>{let{color:s="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:u,...m}=e;return(0,r.createElement)("svg",{ref:t,...l,width:a,height:a,stroke:s,strokeWidth:o?24*Number(i)/Number(a):i,className:n("lucide",c),...m},[...u.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let s=(0,r.forwardRef)((s,l)=>{let{className:o,...c}=s;return(0,r.createElement)(i,{ref:l,iconNode:t,className:n("lucide-".concat(a(e)),o),...c})});return s.displayName="".concat(e),s}},2783:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(4057).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[9124,8441,1517,7358],()=>t(2978)),_N_E=e.O()}]);